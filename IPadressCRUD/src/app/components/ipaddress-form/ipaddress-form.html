<div class="container mt-4">
  <h2>{{ isEdit ? 'Edit IP address' : 'Create new IP address' }}</h2>

  <form [formGroup]="IPaddressForm" (ngSubmit)="onSubmit()">
    <div class="mb-3">
    <label class="form-label fw-semibold">Id</label>
        <input type="text" class="form-control" disabled value="{{ ipToEdit ? ipToEdit.id : 'Auto-generated' }}">
    </div>
    <div class="mb-3">
      <label class="form-label fw-semibold">IP Address</label>
      <input type="text" formControlName="IP" class="form-control" [ngClass]="{
        'is-invalid': IPaddressForm.get('IP')?.invalid && IPaddressForm.get('IP')?.touched,
        'is-valid': IPaddressForm.get('IP')?.valid && IPaddressForm.get('IP')?.touched
      }" placeholder="Enter IP address" />
        <div *ngIf="IPaddressForm.get('IP')?.hasError('required') && IPaddressForm.get('IP')?.touched">
            IP is required
        </div>
        <div *ngIf="IPaddressForm.get('IP')?.hasError('pattern') && IPaddressForm.get('IP')?.touched">
            Invalid IP format
        </div>
        <div *ngIf="IPaddressForm.get('IP')?.hasError('duplicateIP') && IPaddressForm.get('IP')?.touched">
            This IP address is already in use.
        </div>
    </div>

    <div class="mb-3">
      <label class="form-label fw-semibold">Description</label>
      <input type="text" formControlName="Description" class="form-control" placeholder="Optional description"/>
    </div>
    <div class="mb-3">
      <label>VLAN</label>
      <input type="text" formControlName="VLAN" class="form-control" [ngClass]="{
        'is-invalid': IPaddressForm.get('VLAN')?.invalid && IPaddressForm.get('VLAN')?.touched,
        'is-valid': IPaddressForm.get('VLAN')?.valid && IPaddressForm.get('VLAN')?.touched
      }" placeholder="Enter VLAN"/>
    </div>
    <button type="submit"
      class="btn btn-primary px-4" [disabled]="IPaddressForm.invalid">
      {{ isEdit ? 'Update' : 'Create' }}
    </button>

    <button type="button" class="btn btn-outline-secondary ms-2 px-4" *ngIf="ipToEdit" (click)="cancelEdit()" >
      Cancel
    </button>
  </form>
</div>